# README

## Практическое занятие №15

### Тема: Работа с fetch. Отправка сетевых запросов и обработка ответов

Репозитарий содержит материалы по практическому занятию №15, посвященному работе с сетевыми запросами.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Постановка задачи и описание предметной области
В рамках данного занятия, работаем в предметной области социальной сети. Для имитации получения данных с "бэка", используем сервис `https://jsonplaceholder.typicode.com/`. У нас есть посты соц.сети, и комментарии к ним. Нужно сделать работоспособный макет.

ВАЖНО! Сервис нам возвращает данные в JSON-формате. То есть, нам нужно обрабатывать результаты как JSON (парсить ответ запроса к бэку методом `json()`).

Еще важно! Перед тем как собственно выполнять задачи, рекомендуется скопировать адрес запроса в адресную строку браузера и собственно выполнить запрос, и посмотреть на результат. Чтобы понимать, какая структура будет у ответа.

### Задачи занятия
1. У нас есть стили для верстки постов (см. `work.css`), но мы еще не умеем их рендерить. Нам нужно:
 - написать функцию `renderPost`, которая будет принимать JSON-объект с данными поста, и создавать DOM-элемент.
 - написать функцию `renderPosts`, которая будет принимать массив JSON-объектов и рендерить их в контейнер постов.
 - написать функцию `requestPosts`, которая будет запрашивать посты с адреса `https://jsonplaceholder.typicode.com/posts`, и рендерить результаты.

Пост у нас содержит поля:
 - userId - ИД пользователя, создавшего пост
 - id - ИД поста
 - title - заголовок поста
 - body - тело поста

Посты рендерим в виде карточек, в контейнер. DIV-контейнер должен иметь класс `posts-container`. DIV-карточка поста должен иметь класс `post-card`. Заголовок поста - `post-header`, и тело поста - `post-body`.
2. Добавляем функциональность по добавлению новых постов. Нужно написать функцию добавления нового поста. От нас требуется передать параметры `title`, `body`, `userId` методом <b>POST</b> на адрес `https://jsonplaceholder.typicode.com/posts`. При этом, нужно указать заголовок `'Content-type': 'application/json; charset=UTF-8'`. Таким образом, требуется функция вида:
```
/** Функция создания нового поста
 * @param title Заголовок поста
 * @param body Тело
 * @param userId ИД пользователя, добавившего пост
 * @return Promise Возвращает промис, который будет зарезолвлен ответом на запрос создания поста
*/
function createPost(title, body, userId) {
    // ...
}
```
3. Добавить обработку результатов ответа от бэка. При создании поста, бэк возвращает нам JSON с данными "свежесозданного" поста. В этом JSON-объекте есть поля `userId` и `id`. Нужно показать сообщение вида "Пользователь ${userId} успешно добавил пост, ID=${id}". Сообщение это нужно показать в контейнере `notification-container`, который изначально скрыт.
4. Прячем сообщение об успешном создании поста. Нужно убирать сообщение автоматически, через 5 секунд после показа.
5. Работаем с комментариями. Под каждым постом есть комментарии. Их можно запросить по адресу `https://jsonplaceholder.typicode.com/posts/{postId}/comments`, где postId - это ИД поста. Нужно доработать нашу функцию `renderPost` так, чтобы при клике по карточке поста отправлялся запрос на этот адрес, с идентификатором поста. Результат запроса выводить в консоль.
6. Теперь показываем комменты. Под контейнером постов, добавляем новый DIV с классом `comments-container`. Задача - при получении массива комментов (то что мы делали в предыдущем пункте), очищать `comments-container` и заполнять его комментариями. Комменты рендерить в виде div-а с классом `comment-container`, который содержит 2 параграфа: первый - емейл, второй - тело поста.

### Полезные ссылки по занятию:
 - Спецификация [fetch](https://developer.mozilla.org/en-US/docs/Web/API/fetch) на MDN - англоязычная.
 - Русскоязычный гайд по отправке [POST-запросов](https://learn.javascript.ru/fetch#post-zaprosy).
### Полезные ссылки по промисам:
 - Подробный гайд по [Promise API](https://learn.javascript.ru/promise-basics) - русскоязычный.
 - Статья с примерами по использованию [Promises](https://www.freecodecamp.org/news/javascript-promise-tutorial-how-to-resolve-or-reject-promises-in-js/) - англоязычная. Включает в чебя также параллельное выполнение (`all`, `race`, `any`, и т.д.)