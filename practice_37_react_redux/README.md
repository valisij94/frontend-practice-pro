# README

## Практическое занятие №37

### Тема:

Репозитарий содержит материалы по практическому занятию №37, посвященному работе с библиотеками `Redux`, `react-redux`.

### Цели занятия
- закрепление знаний, полученных на лекции;
- разбор практических примеров;
- практическое применение полученных знаний.

### Задачи занятия
1. Добавляем Redux-стейт в наше приложение. Библиотеки уже добавлены, так что можно с ними работать. Сейчас, в нашем `store` предполагается хранить данные пользователя (логин и пароль), которые он введет в компоненте `LoginForm`. Структура объекта `store`:
```
store = {
    userData: {
        login: 'Vasilij',
        passwd: 'TopSikret!'
    }
}
```

Что нужно сделать:
 - создать в проекте папку `store`
 - в этой папке, создать папку `reducers` - здсь будут наши редьюсеры
 - также создать папку `actions` - здсь будут `actionCreators`
 - создаем первые экшны. Пока что нам нужен только один тип экшна - `addUserData`, то есть добавляем данные пользователя. Тип - `USER_ACTIONS/ADD_USER`. Сам `actionCreator` будет принимать логин и пароль, и создавать объект-экшн.
 - создаем первый редьюсер в папке`reducers`. Называем его `userReducer.js`. И обрабатываем в нем наш экшн из предыдущего пункта. Нужно записать в `store.userData` логин и пароль, которые возьмем из данных экшна.
 - в папке `store` создать файл `store.js` - здесь мы инициализируем наш редакс-стейт, создаем `store`, и экспортируем его. При создании стора, ОБЯЗАТЕЛЬНО используем `combineReducers` - он нам понадобится дальше.
2. В компоненте `LoginForm`, нужно на событие клика на кнопку "Войти", сохранять данные в редакс-стейте. Для этого, нам поможет хук `useDispatch`.
3. Теперь извлечем эти данные из стейта. Нужно, чтобы компонент при первом рендеринге, брал эти данные из стейта. Тут нам пригодится хук `useSelector`, который извлечет данные из стейта. Этими данными нам предстоит заполнить наш локальный стейт компонента. Сделать это лучше в `useEffect`, только ему нужно передать правильный массив зависимостей.
4. Расширяем наш стейт. Теперь добавляем функциональность корзины. Нам нужно хранить в корзине объект с данными товаров, которые пользователь добавил. Теперь наш стейт будет выглядеть так:
```
store = {
    userData: {/* User Data added in the previous task*/},
    cartData: {
        1: 10, // товар с ID=1, количество 10 единиц
        5: 2,  // товар с ID=5, количество 2 единицы
    }
}
```
Нам понадобится создать экшны (`actions/cartActions.js`), и редьюсер (`reducers/cartReducer.js`). Пока что добавляем только экшн `addProduct`, который должен принимать ID товара, и в объекте-стейте увеличивать количество этого товара на единицу. НЕ ЗАБЫВАЕМ, что мы НЕ МУТИРУЕМ стейт, а создаем новый объект!
5. Добавляем динамики в приложение. В наш компонент `ProductItem`, на кнопку `Add`, нужно добавить слушатель, который выполнит `dispatch` экшна по добавлению этого товара в корзину.
6. Сейчас наше приложение хранит список товаров в локальном стейте компонента `ProductList`. Перенесем его в редакс-стейт.
 - создадим для него раздел стейта, будем его хранить в массиве `products`
 - создадим экшны (файл `productsActions.js`). Пока что в нем будет только один экшн - запись массива товаров. Он будет принимать в качестве аргумента массив товаров, который мы получим с бэка.
 - создадим редьюсер (`productsReducer.js`). Там обрабатываем экшн, который описали в предыдущем пункте
 - дорабатываем компонент `ProductsList`. Сейчас он отправляет запрос на бэк, получает данные, и пишет их в локальный стейт. Надо сделать так, чтобы он диспатчил экшн из предыдущего пункта, и в него передавал массив товаров (результат запроса)
  - подписываем наш компонент на `state.products`, теперь мы оттуда берем данные для отрисовки списка товаров.

### Полезные ссылки по занятию:
 - [React Redux](https://ru.react-redux.js.org/introduction/getting-started) - официальная русскоязычная(!) документация. О качестве перевода лучше не задумываться - чем богаты. Рекомендуется в качестве справочника. Есть очень толковые примеры.
 - [Описание React-Redux](https://medium.com/swlh/react-redux-hooks-5e5dbb52d057) - англоязычное, но рекомендуется к прочтению. Немало полезной информации о хуках, о том, как это работает "под капотом". Также там упоминается "старый" редакс, без хуков (`connect`). Имеет смысл ознакомиться - на собесах попадается.
 - [О работе редакс под капотом](https://ivaneroshkin.medium.com/%D0%BA%D0%B0%D0%BA-%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D0%B5%D1%82-redux-a967d8616398) - это для глубокого понимания, как работает редакс, и для демонстрации того, что он НЕ зависит от реакта, и может использоваться в plain JS code.